language: node_js
node_js:
  - "8.11.4"
cache: yarn
branches:
  only:
    - dev
    - master
before_script:
  - yarn global add ganache-cli
  - ganache-cli --accounts 500 >ganache.log 2>&1 &
  - yarn test:coverage && cat test-coverage/lcov.info | node_modules/.bin/coveralls
  - yarn test:integration
script:
  - yarn build
  - yarn release
notifications:
  email:
    - dev-notifications@noblockno.party
